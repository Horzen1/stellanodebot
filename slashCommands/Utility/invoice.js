function _0x1004(_0x4036d2,_0x16d43d){const _0x3807ff=_0x3807();return _0x1004=function(_0x10044a,_0x1b077d){_0x10044a=_0x10044a-0x76;let _0x250feb=_0x3807ff[_0x10044a];return _0x250feb;},_0x1004(_0x4036d2,_0x16d43d);}function _0x3807(){const _0x569cbd=['-unpaid','bHIhO','has','addNumberOption','then','../../models/stripeInvoicesModel','Color','OnlyInTicketChannels','setTimestamp','Embed','addSubcommand','send_invoice','WYqvp','trim','details','Enabled','iconURL','PayPalSettings','{user.username}','Stripe\x20Invoice','TchrU','service','PayPalPrice','log','PaymentMethods','StatusUnpaid','kXojT','{seller.username}','PayPal\x20Invoice','2028985AHZjDN','Error\x20Details:','PXbTN','user','[ERROR]\x20The\x20PayPal\x20API\x20Credentials\x20you\x20specified\x20in\x20the\x20config\x20are\x20invalid!\x20Make\x20sure\x20you\x20use\x20the\x20\x22LIVE\x22\x20mode!','LogsChannelID','tONuF','channel','utf8','Currency','{seller}','./commands.yml','displayAvatarURL','PPViC','234345XfDkKt','PayPalLogTitle','deferReply','customers','cache','invoice','../../models/ticketModel','setLabel','setRequired','setThumbnail','731295yaIQEx','ChannelID','replace','customer','{price}','PayPalUser','WnWsc','>\x20<@!','load','ybDDG','send','Description','12494331BrwekB','png','retrieve','Fields','IconEnabled','error','NotInTicketChannel','Logo','paypalInvoice','invoices','CurrencySymbol','CustomThumbnail','options','Danger','setCustomId','Footer','setStyle','create','get','YEVJK','StripeSettings','length','Locale','1424260drKcRx','findOneAndDelete','roles','response','stripe','deleted','setFooter','stripeInvoice','CustomIconURL','{service}','\x1b[31m%s\x1b[0m','status','guild','addStringOption','102652uDCinN','lsnhK','discord.js','username','Title','4834912cwlQJx','Invoice','WaYxv','getNumber','NAbrY','paid','reply','setColor','NET_45','<@!','ActionRowBuilder','paypal','price','addFields','TicketSettings','sendInvoice','AllowedRoles','9GFWcoM','mjynN','channels','ThumbnailEnabled','PayPalService','setName','setTitle','12oIePdQ','User','setDescription'];_0x3807=function(){return _0x569cbd;};return _0x3807();}const _0x35e1ca=_0x1004;(function(_0x398043,_0x5b6d10){const _0xd438e1=_0x1004,_0x584069=_0x398043();while(!![]){try{const _0x2c0069=parseInt(_0xd438e1(0xab))/0x1+-parseInt(_0xd438e1(0xe6))/0x2*(-parseInt(_0xd438e1(0x76))/0x3)+-parseInt(_0xd438e1(0xd8))/0x4+parseInt(_0xd438e1(0xb5))/0x5+-parseInt(_0xd438e1(0x7d))/0x6*(parseInt(_0xd438e1(0x9d))/0x7)+-parseInt(_0xd438e1(0xeb))/0x8+parseInt(_0xd438e1(0xc1))/0x9;if(_0x2c0069===_0x5b6d10)break;else _0x584069['push'](_0x584069['shift']());}catch(_0x1dcdc6){_0x584069['push'](_0x584069['shift']());}}}(_0x3807,0x5d6ee));const {SlashCommandBuilder}=require('@discordjs/builders'),{ActionRowBuilder,ButtonBuilder,EmbedBuilder}=require(_0x35e1ca(0xe8)),Discord=require('discord.js'),fs=require('fs'),yaml=require('js-yaml'),config=yaml['load'](fs['readFileSync']('./config.yml',_0x35e1ca(0xa5))),commands=yaml[_0x35e1ca(0xbd)](fs['readFileSync'](_0x35e1ca(0xa8),'utf8')),utils=require('../../utils.js'),paypalModel=require('../../models/paypalInvoicesModel'),stripeModel=require(_0x35e1ca(0x85)),ticketModel=require(_0x35e1ca(0xb1));module['exports']={'enabled':commands['Utility']['Invoice']['Enabled'],'data':new SlashCommandBuilder()['setName']('invoice')['setDescription'](commands['Utility'][_0x35e1ca(0xec)]['Description'])['addSubcommand'](_0x5a2977=>_0x5a2977[_0x35e1ca(0x7b)]('paypal')[_0x35e1ca(0x7f)](_0x35e1ca(0x9c))['addUserOption'](_0x45a2a5=>_0x45a2a5[_0x35e1ca(0x7b)](_0x35e1ca(0xa0))['setDescription'](_0x35e1ca(0x7e))['setRequired'](!![]))['addNumberOption'](_0x5ccc80=>_0x5ccc80['setName'](_0x35e1ca(0xf7))['setDescription']('Price')['setRequired'](!![]))['addStringOption'](_0x2ad83b=>_0x2ad83b['setName'](_0x35e1ca(0x95))['setDescription']('Service')[_0x35e1ca(0xb3)](!![])))[_0x35e1ca(0x8a)](_0xd68870=>_0xd68870['setName']('stripe')[_0x35e1ca(0x7f)](_0x35e1ca(0x93))['addUserOption'](_0x56a1d0=>_0x56a1d0[_0x35e1ca(0x7b)](_0x35e1ca(0xa0))[_0x35e1ca(0x7f)]('User')['setRequired'](!![]))[_0x35e1ca(0xe5)](_0x58a0c0=>_0x58a0c0[_0x35e1ca(0x7b)]('email')[_0x35e1ca(0x7f)]('Customer\x20Email')['setRequired'](!![]))[_0x35e1ca(0x83)](_0x40530e=>_0x40530e['setName']('price')[_0x35e1ca(0x7f)]('Price')[_0x35e1ca(0xb3)](!![]))['addStringOption'](_0x5ca113=>_0x5ca113['setName'](_0x35e1ca(0x95))['setDescription']('Service')['setRequired'](!![]))),async 'execute'(_0x3f6a58,_0x54d67c){const _0x2944ba=_0x35e1ca,_0x1bee06=await ticketModel['findOne']({'channelID':_0x3f6a58['channel']['id']});let _0x399a94=_0x3f6a58['options']['getSubcommand'](),_0x4f7b72=_0x3f6a58[_0x2944ba(0xcd)]['getUser']('user'),_0x4d62de=_0x3f6a58['options'][_0x2944ba(0xee)](_0x2944ba(0xf7)),_0x325648=_0x3f6a58['options']['getString']('service'),_0x3b92da=_0x3f6a58['options']['getString']('email');if(_0x399a94==='paypal'){if(config[_0x2944ba(0x91)]['Enabled']===![])return _0x3f6a58[_0x2944ba(0xf1)]({'content':'This\x20command\x20has\x20been\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});if(config['PayPalSettings']['OnlyInTicketChannels']&&!_0x1bee06)return _0x3f6a58['reply']({'content':config['Locale'][_0x2944ba(0xc7)],'ephemeral':!![]});let _0x2ac677=![];for(let _0x2d256b=0x0;_0x2d256b<config['PayPalSettings'][_0x2944ba(0xfb)]['length'];_0x2d256b++){if(_0x2944ba(0xef)!==_0x2944ba(0xef))_0x1e437e['CustomThumbnail']&&_0x3f14a4['CustomThumbnail']!==''?_0xc9f2e9[_0x2944ba(0xb4)](_0x209d39[_0x2944ba(0xcc)]):_0x506b0d[_0x2944ba(0xb4)](_0x13e66c['displayAvatarURL']({'format':_0x2944ba(0xc2),'dynamic':!![]}));else{role=_0x3f6a58['guild']['roles']['cache']['get'](config['PayPalSettings']['AllowedRoles'][_0x2d256b]);if(role&&_0x3f6a58['member'][_0x2944ba(0xda)]['cache']['has'](config[_0x2944ba(0x91)]['AllowedRoles'][_0x2d256b]))_0x2ac677=!![];}}if(_0x2ac677===![])return _0x3f6a58[_0x2944ba(0xf1)]({'content':config['Locale']['NoPermsMessage'],'ephemeral':!![]});await _0x3f6a58['deferReply']();let _0x2639ff;if(!config['PayPalSettings'][_0x2944ba(0xc8)])_0x2639ff=_0x3f6a58['guild'][_0x2944ba(0x90)]();if(config[_0x2944ba(0x91)][_0x2944ba(0xc8)])_0x2639ff=config[_0x2944ba(0x91)]['Logo'];let _0x26432b={'merchant_info':{'email':config['PayPalSettings']['Email'],'business_name':_0x3f6a58['guild']['name']},'items':[{'name':_0x325648,'quantity':0x1,'unit_price':{'currency':config['PayPalSettings'][_0x2944ba(0xa6)],'value':_0x4d62de}}],'logo_url':_0x2639ff,'note':config['PayPalSettings']['Description'],'payment_term':{'term_type':_0x2944ba(0xf3)},'tax_inclusive':![],'shipping_info':{}};_0x54d67c[_0x2944ba(0xf6)][_0x2944ba(0xb0)]['create'](_0x26432b,async(_0x4265a5,_0x339c42)=>{const _0x65bb2a=_0x2944ba;'hExMh'===_0x65bb2a(0xbb)?_0x40db65['setFooter']({'text':_0x2faf09,'iconURL':_0x434517[_0x65bb2a(0xa9)]({'format':'png','dynamic':!![]})}):_0x4265a5?_0x65bb2a(0xbe)!==_0x65bb2a(0x9f)?_0x4265a5[_0x65bb2a(0xdb)]['error']==='invalid_client'?console['log'](_0x65bb2a(0xe2),_0x65bb2a(0xa1)):(console[_0x65bb2a(0xc6)]('PayPal\x20API\x20Error:',_0x4265a5),_0x4265a5['response']['details']&&console[_0x65bb2a(0xc6)]('Error\x20Details:',_0x4265a5['response']['details'])):_0x43854e['setTimestamp']():_0x54d67c[_0x65bb2a(0xf6)]['invoice']['send'](_0x339c42['id'],function(_0x18cfe1,_0x46e6d2){const _0x155a8f=_0x65bb2a;if(_0x4265a5)_0x155a8f(0xed)!=='cCduq'?console[_0x155a8f(0x97)](_0x4265a5):_0x3e14b6['setThumbnail'](_0x3514df['CustomThumbnail']);else{if(_0x155a8f(0x81)===_0x155a8f(0x77))_0x276e1e[_0x155a8f(0xd0)]['Enabled']&&_0x17287c['Footer']['CustomIconURL']==''&&_0x205ce2[_0x155a8f(0xd0)][_0x155a8f(0xc5)]?_0x5799de[_0x155a8f(0xde)]({'text':_0x28e83e,'iconURL':_0x84c54c['displayAvatarURL']({'format':_0x155a8f(0xc2),'dynamic':!![]})}):_0x3d57c2[_0x155a8f(0xde)]({'text':_0x3ac5f3});else{const _0x4498ec=new ActionRowBuilder()['addComponents'](new ButtonBuilder()[_0x155a8f(0xd1)]('Link')['setURL']('https://www.paypal.com/invoice/payerView/details/'+_0x339c42['id'])[_0x155a8f(0xb2)](config['Locale']['PayPalPayInvoice']),new ButtonBuilder()['setCustomId'](_0x339c42['id']+_0x155a8f(0x80))['setStyle'](_0x155a8f(0xce))['setLabel'](config['PayPalSettings'][_0x155a8f(0x99)])['setDisabled'](!![])),_0x115ec4=config[_0x155a8f(0x91)][_0x155a8f(0x89)],_0x352324=new EmbedBuilder();if(_0x115ec4['Title'])_0x352324['setTitle'](_0x115ec4['Title']['replace'](_0x155a8f(0x9b),_0x3f6a58['user']['username'])['replace'](_0x155a8f(0x92),_0x4f7b72['username']));if(_0x115ec4['Color'])_0x352324['setColor'](_0x115ec4['Color']);if(!_0x115ec4[_0x155a8f(0x86)])_0x352324['setColor'](config['EmbedColors']);if(_0x115ec4['Description'])_0x352324[_0x155a8f(0x7f)](_0x115ec4[_0x155a8f(0xc0)]);_0x115ec4[_0x155a8f(0x79)]&&(_0x115ec4['CustomThumbnail']&&_0x115ec4['CustomThumbnail']!==''?'UNRUh'!=='yzPMG'?_0x352324['setThumbnail'](_0x115ec4['CustomThumbnail']):(_0xf82456[_0x155a8f(0xc6)]('PayPal\x20API\x20Error:',_0x1360e6),_0x574448[_0x155a8f(0xdb)]['details']&&_0x46e75c[_0x155a8f(0xc6)](_0x155a8f(0x9e),_0x51673f[_0x155a8f(0xdb)]['details'])):_0x352324[_0x155a8f(0xb4)](_0x4f7b72[_0x155a8f(0xa9)]({'format':_0x155a8f(0xc2),'dynamic':!![]})));_0x352324['addFields'](_0x115ec4['Fields']['map'](_0x19c999=>({'name':_0x19c999['name'],'value':_0x19c999['value']['replace'](_0x155a8f(0xa7),'<@!'+_0x3f6a58['user']['id']+'>')[_0x155a8f(0xb7)](_0x155a8f(0x9b),_0x3f6a58['user']['username'])['replace']('{user}',_0x155a8f(0xf4)+_0x4f7b72['id']+'>')[_0x155a8f(0xb7)](_0x155a8f(0x92),_0x4f7b72[_0x155a8f(0xe9)])['replace'](_0x155a8f(0xe1),_0x325648)['replace']('{price}',''+config['PayPalSettings']['CurrencySymbol']+_0x4d62de+'\x20('+config['PayPalSettings'][_0x155a8f(0xa6)]+')')})));_0x115ec4['Timestamp']&&_0x352324['setTimestamp']();const _0x129626=_0x115ec4[_0x155a8f(0xd0)]['text']['replace']('{user.username}',_0x4f7b72[_0x155a8f(0xe9)]);_0x129626[_0x155a8f(0x8d)]()!==''&&(_0x115ec4['Footer']['Enabled']&&_0x115ec4['Footer'][_0x155a8f(0xe0)]==''&&_0x115ec4['Footer']['IconEnabled']?_0x352324['setFooter']({'text':_0x129626,'iconURL':_0x4f7b72[_0x155a8f(0xa9)]({'format':'png','dynamic':!![]})}):'ZtWYg'==='BCRqQ'?_0xc0d24c['setFooter']({'text':_0x51278d,'iconURL':_0x2f3605['Footer'][_0x155a8f(0xe0)]}):_0x352324['setFooter']({'text':_0x129626})),_0x129626['trim']()!==''&&_0x115ec4['Footer']['CustomIconURL']!==''&&_0x115ec4['Footer']['IconEnabled']&&_0x352324['setFooter']({'text':_0x129626,'iconURL':_0x115ec4[_0x155a8f(0xd0)][_0x155a8f(0xe0)]}),_0x3f6a58['editReply']({'embeds':[_0x352324],'components':[_0x4498ec]})[_0x155a8f(0x84)](async function(_0x56e03f){const _0x4132d2=_0x155a8f,_0x20b1d0=new paypalModel({'invoiceID':_0x339c42['id'],'userID':_0x4f7b72['id'],'sellerID':_0x3f6a58[_0x4132d2(0xa0)]['id'],'channelID':_0x3f6a58[_0x4132d2(0xa4)]['id'],'messageID':_0x56e03f['id'],'price':_0x4d62de,'service':_0x325648,'status':_0x339c42['status']});await _0x20b1d0['save']();let _0x48e52d;if(!config['paypalInvoice'][_0x4132d2(0xb6)])_0x48e52d=_0x3f6a58['guild'][_0x4132d2(0x78)]['cache'][_0x4132d2(0xd3)](config['TicketSettings']['LogsChannelID']);if(config['paypalInvoice'][_0x4132d2(0xb6)])_0x48e52d=_0x3f6a58['guild']['channels']['cache']['get'](config['paypalInvoice'][_0x4132d2(0xb6)]);const _0x3e4081=new EmbedBuilder()[_0x4132d2(0xf2)]('Green')['setTitle'](config[_0x4132d2(0xd7)][_0x4132d2(0xac)])['addFields']([{'name':'•\x20'+config[_0x4132d2(0xd7)]['logsExecutor'],'value':'>\x20<@!'+_0x3f6a58['user']['id']+'>\x0a>\x20'+_0x3f6a58[_0x4132d2(0xa0)]['username']},{'name':'•\x20'+config['Locale'][_0x4132d2(0xba)],'value':_0x4132d2(0xbc)+_0x4f7b72['id']+'>\x0a>\x20'+_0x4f7b72[_0x4132d2(0xe9)]},{'name':'•\x20'+config[_0x4132d2(0xd7)][_0x4132d2(0x96)],'value':'>\x20'+config['PayPalSettings'][_0x4132d2(0xcb)]+_0x4d62de},{'name':'•\x20'+config[_0x4132d2(0xd7)][_0x4132d2(0x7a)],'value':'>\x20'+_0x325648}])[_0x4132d2(0x88)]()[_0x4132d2(0xb4)](_0x3f6a58[_0x4132d2(0xa0)]['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['setFooter']({'text':''+_0x3f6a58[_0x4132d2(0xa0)]['username'],'iconURL':''+_0x3f6a58['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400})});if(_0x48e52d&&config[_0x4132d2(0xc9)][_0x4132d2(0x8f)])_0x48e52d[_0x4132d2(0xbf)]({'embeds':[_0x3e4081]});let _0x222e30=setInterval(async()=>{const _0x3b246e=_0x4132d2;if(_0x3b246e(0xd4)==='DRDVJ')_0x517f9e[_0x3b246e(0xc6)]('Error\x20Details:',_0x17c28c[_0x3b246e(0xdb)][_0x3b246e(0x8e)]);else{await utils['checkPayPalPayments']();const _0x502a76=await paypalModel['findOne']({'invoiceID':_0x339c42['id']});if(_0x502a76&&_0x502a76?.[_0x3b246e(0xe3)]==='paid'){await clearInterval(_0x222e30),await paypalModel[_0x3b246e(0xd9)]({'invoiceID':_0x339c42['id']});return;}if(_0x502a76&&_0x502a76?.['status']===_0x3b246e(0xdd)){if('TchrU'!==_0x3b246e(0x94))_0x3e0173['setThumbnail'](_0x3d384b['displayAvatarURL']({'format':_0x3b246e(0xc2),'dynamic':!![]}));else{await clearInterval(_0x222e30),await paypalModel[_0x3b246e(0xd9)]({'invoiceID':_0x339c42['id']});return;}}}},0x4e20);});}}});});}else{if(_0x399a94===_0x2944ba(0xdc)){if(config[_0x2944ba(0xd5)]['Enabled']===![])return _0x3f6a58['reply']({'content':'This\x20command\x20has\x20been\x20disabled\x20in\x20the\x20config!','ephemeral':!![]});if(config[_0x2944ba(0xd5)][_0x2944ba(0x87)]&&!_0x1bee06)return _0x3f6a58[_0x2944ba(0xf1)]({'content':config[_0x2944ba(0xd7)][_0x2944ba(0xc7)],'ephemeral':!![]});let _0x38c130=![];for(let _0xd5f733=0x0;_0xd5f733<config['StripeSettings']['AllowedRoles'][_0x2944ba(0xd6)];_0xd5f733++){role=_0x3f6a58['guild'][_0x2944ba(0xda)][_0x2944ba(0xaf)][_0x2944ba(0xd3)](config['StripeSettings']['AllowedRoles'][_0xd5f733]);if(role&&_0x3f6a58['member']['roles'][_0x2944ba(0xaf)][_0x2944ba(0x82)](config[_0x2944ba(0xd5)]['AllowedRoles'][_0xd5f733]))_0x38c130=!![];}if(_0x38c130===![])return _0x3f6a58['reply']({'content':config['Locale']['NoPermsMessage'],'ephemeral':!![]});let _0x2f209f=_0x4d62de*0x64;await _0x3f6a58[_0x2944ba(0xad)](),_0x54d67c['stripe'][_0x2944ba(0xae)][_0x2944ba(0xd2)]({'email':_0x3b92da,'name':_0x4f7b72['username'],'description':'Discord\x20User\x20ID:\x20'+_0x4f7b72['id']})['then'](_0x33027c=>{const _0x136fc9=_0x2944ba;if(_0x136fc9(0x8c)!=='WYqvp')_0x1ead47['setThumbnail'](_0x381f9a['CustomThumbnail']);else return _0x54d67c[_0x136fc9(0xdc)]['invoiceItems']['create']({'customer':_0x33027c['id'],'amount':_0x2f209f,'currency':config['StripeSettings'][_0x136fc9(0xa6)],'description':_0x325648})['then'](_0x42da8f=>{const _0xb8a3fa=_0x136fc9;return _0x54d67c['stripe']['invoices']['create']({'collection_method':_0xb8a3fa(0x8b),'days_until_due':0x1e,'customer':_0x42da8f[_0xb8a3fa(0xb8)],'payment_settings':{'payment_method_types':config['StripeSettings'][_0xb8a3fa(0x98)]}});})['then'](async _0x48c8ec=>{const _0x17098a=_0x136fc9;await _0x54d67c['stripe']['invoices'][_0x17098a(0xfa)](_0x48c8ec['id']);let _0x24afc2=await _0x54d67c[_0x17098a(0xdc)][_0x17098a(0xca)][_0x17098a(0xc3)](_0x48c8ec['id']);const _0x1c6817=new Discord[(_0x17098a(0xf5))]()['addComponents'](new ButtonBuilder()['setStyle']('Link')['setURL'](''+_0x24afc2['hosted_invoice_url'])['setLabel'](config[_0x17098a(0xd7)]['PayPalPayInvoice']),new ButtonBuilder()[_0x17098a(0xcf)](_0x48c8ec['id']+_0x17098a(0x80))[_0x17098a(0xd1)](_0x17098a(0xce))['setLabel'](config[_0x17098a(0x91)][_0x17098a(0x99)])['setDisabled'](!![])),_0x57c2d4=config['StripeSettings'][_0x17098a(0x89)],_0x5b488c=new EmbedBuilder();if(_0x57c2d4[_0x17098a(0xea)])_0x5b488c['setTitle'](_0x57c2d4[_0x17098a(0xea)][_0x17098a(0xb7)](_0x17098a(0x9b),_0x3f6a58[_0x17098a(0xa0)][_0x17098a(0xe9)])[_0x17098a(0xb7)]('{user.username}',_0x4f7b72['username']));if(_0x57c2d4['Color'])_0x5b488c[_0x17098a(0xf2)](_0x57c2d4[_0x17098a(0x86)]);if(!_0x57c2d4['Color'])_0x5b488c['setColor'](config['EmbedColors']);if(_0x57c2d4['Description'])_0x5b488c['setDescription'](_0x57c2d4['Description']);if(_0x57c2d4['ThumbnailEnabled']){if('lsnhK'===_0x17098a(0xe7)){if(_0x57c2d4[_0x17098a(0xcc)]&&_0x57c2d4['CustomThumbnail']!=='')_0x5b488c['setThumbnail'](_0x57c2d4[_0x17098a(0xcc)]);else{if('cUzvB'==='cUzvB')_0x5b488c['setThumbnail'](_0x4f7b72['displayAvatarURL']({'format':_0x17098a(0xc2),'dynamic':!![]}));else{_0x342448=_0x5db0ae['guild']['roles']['cache'][_0x17098a(0xd3)](_0x349eb1[_0x17098a(0xd5)][_0x17098a(0xfb)][_0x610de9]);if(_0x419dc7&&_0x4d0223['member'][_0x17098a(0xda)][_0x17098a(0xaf)]['has'](_0x59122c['StripeSettings'][_0x17098a(0xfb)][_0x49c6ad]))_0x52cfb7=!![];}}}else return _0x3b48e3[_0x17098a(0xdc)][_0x17098a(0xca)]['create']({'collection_method':_0x17098a(0x8b),'days_until_due':0x1e,'customer':_0x2b882a[_0x17098a(0xb8)],'payment_settings':{'payment_method_types':_0x236bf3['StripeSettings']['PaymentMethods']}});}_0x5b488c[_0x17098a(0xf8)](_0x57c2d4[_0x17098a(0xc4)]['map'](_0x247906=>({'name':_0x247906['name'],'value':_0x247906['value'][_0x17098a(0xb7)]('{seller}',_0x17098a(0xf4)+_0x3f6a58['user']['id']+'>')['replace'](_0x17098a(0x9b),_0x3f6a58['user']['username'])[_0x17098a(0xb7)]('{user}','<@!'+_0x4f7b72['id']+'>')['replace'](_0x17098a(0x92),_0x4f7b72[_0x17098a(0xe9)])['replace'](_0x17098a(0xe1),_0x325648)['replace'](_0x17098a(0xb9),''+config['StripeSettings'][_0x17098a(0xcb)]+_0x4d62de+'\x20('+config['StripeSettings']['Currency']+')')})));_0x57c2d4['Timestamp']&&_0x5b488c[_0x17098a(0x88)]();const _0x611abc=_0x57c2d4[_0x17098a(0xd0)]['text'][_0x17098a(0xb7)]('{user.username}',_0x4f7b72[_0x17098a(0xe9)]);_0x611abc[_0x17098a(0x8d)]()!==''&&('AchTQ'==='BKgGM'?_0x3f9913[_0x17098a(0xd0)]['Enabled']&&_0x3c0ab0['Footer']['CustomIconURL']==''&&_0x5edb40[_0x17098a(0xd0)][_0x17098a(0xc5)]?_0x80bcc8['setFooter']({'text':_0x3c26cd,'iconURL':_0x56dabd['displayAvatarURL']({'format':'png','dynamic':!![]})}):_0xdf99e6[_0x17098a(0xde)]({'text':_0x1c308b}):_0x57c2d4[_0x17098a(0xd0)][_0x17098a(0x8f)]&&_0x57c2d4[_0x17098a(0xd0)]['CustomIconURL']==''&&_0x57c2d4[_0x17098a(0xd0)][_0x17098a(0xc5)]?'QkwUv'==='ECPVz'?_0x4200c0[_0x17098a(0xb4)](_0x9c1988[_0x17098a(0xa9)]({'format':'png','dynamic':!![]})):_0x5b488c['setFooter']({'text':_0x611abc,'iconURL':_0x4f7b72[_0x17098a(0xa9)]({'format':'png','dynamic':!![]})}):_0x5b488c['setFooter']({'text':_0x611abc}));_0x611abc['trim']()!==''&&_0x57c2d4['Footer'][_0x17098a(0xe0)]!==''&&_0x57c2d4['Footer']['IconEnabled']&&_0x5b488c[_0x17098a(0xde)]({'text':_0x611abc,'iconURL':_0x57c2d4[_0x17098a(0xd0)][_0x17098a(0xe0)]});_0x3f6a58['editReply']({'embeds':[_0x5b488c],'components':[_0x1c6817]})['then'](async function(_0x2112a8){const _0xa3c7c5=_0x17098a;let _0xc1d075;if(!config['stripeInvoice'][_0xa3c7c5(0xb6)])_0xc1d075=_0x3f6a58[_0xa3c7c5(0xe4)]['channels'][_0xa3c7c5(0xaf)]['get'](config[_0xa3c7c5(0xf9)][_0xa3c7c5(0xa2)]);if(config[_0xa3c7c5(0xdf)][_0xa3c7c5(0xb6)])_0xc1d075=_0x3f6a58[_0xa3c7c5(0xe4)]['channels']['cache']['get'](config[_0xa3c7c5(0xdf)][_0xa3c7c5(0xb6)]);const _0x217609=new Discord['EmbedBuilder']()[_0xa3c7c5(0xf2)]('Green')[_0xa3c7c5(0x7c)](config['Locale']['StripeLogTitle'])['addFields']([{'name':'•\x20'+config['Locale']['logsExecutor'],'value':'>\x20<@!'+_0x3f6a58['user']['id']+'>\x0a>\x20'+_0x3f6a58[_0xa3c7c5(0xa0)]['username']},{'name':'•\x20'+config[_0xa3c7c5(0xd7)]['PayPalUser'],'value':'>\x20<@!'+_0x4f7b72['id']+'>\x0a>\x20'+_0x4f7b72[_0xa3c7c5(0xe9)]},{'name':'•\x20'+config[_0xa3c7c5(0xd7)]['PayPalPrice'],'value':'>\x20'+config['StripeSettings']['CurrencySymbol']+_0x4d62de},{'name':'•\x20'+config['Locale']['PayPalService'],'value':'>\x20'+_0x325648}])['setTimestamp']()['setThumbnail'](_0x3f6a58['user']['displayAvatarURL']({'format':'png','dynamic':!![],'size':0x400}))['setFooter']({'text':''+_0x3f6a58[_0xa3c7c5(0xa0)]['username'],'iconURL':''+_0x3f6a58['user'][_0xa3c7c5(0xa9)]({'format':'png','dynamic':!![],'size':0x400})});if(_0xc1d075&&config['stripeInvoice'][_0xa3c7c5(0x8f)])_0xc1d075['send']({'embeds':[_0x217609]});const _0x3ffae2=new stripeModel({'invoiceID':_0x24afc2['id'],'userID':_0x4f7b72['id'],'sellerID':_0x3f6a58['user']['id'],'channelID':_0x3f6a58['channel']['id'],'messageID':_0x2112a8['id'],'customerID':_0x24afc2['customer'],'price':_0x4d62de,'service':_0x325648,'status':_0x24afc2[_0xa3c7c5(0xe3)]});await _0x3ffae2['save']();});let _0x2451e1=setInterval(async()=>{const _0x4a92a3=_0x17098a;await utils['checkStripePayments']();const _0x571330=await stripeModel['findOne']({'invoiceID':_0x24afc2['id']});if(_0x571330&&_0x571330?.[_0x4a92a3(0xe3)]===_0x4a92a3(0xf0)){await clearInterval(_0x2451e1),await stripeModel[_0x4a92a3(0xd9)]({'invoiceID':_0x24afc2['id']});return;}if(_0x571330&&_0x571330?.['status']==='deleted'){if(_0x4a92a3(0x9a)===_0x4a92a3(0xa3))_0x8681e3['log'](_0x14f04d);else{await clearInterval(_0x2451e1),await stripeModel['findOneAndDelete']({'invoiceID':_0x24afc2['id']});return;}}},0x4e20);})['catch'](_0x4cef67=>{const _0x1c0413=_0x136fc9;_0x1c0413(0xaa)!=='PPViC'?_0x2db2f4[_0x1c0413(0x97)](_0x4f8118):console['log'](_0x4cef67);});});}}}};