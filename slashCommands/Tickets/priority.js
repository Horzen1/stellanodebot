function _0x30fb(){const _0xbe4058=['808GqxCbq','seconds','1001743SSGzEQ','Priority\x20level','minutes','push','PrioritySettings','clear','Locale','find','``.','setTitle','findOne','type','280jpALgW','setFooter','roles','utf8','send','floor','toLowerCase','minute','3gkbHbM','priority','addSubcommand','findOneAndUpdate','12054XatkTK','setDescription','checkIfUserHasSupportRoles','Wbklm','setColor','name','guild','910fgCjTe','UUlKS','filter','./config.yml','channel','EmbedBuilder','map','load','25435UMFMAn','Cooldown','user','51970PQqTtI','now','second','setName','addChoices','2167ulLoNF','username','Yellow','getString','readFileSync','displayAvatarURL','142173RWwWyr','editReply','setTimestamp','434674EiPqTK','cache','setPosition','Rtrey','Set\x20the\x20priority\x20of\x20a\x20ticket','getSubcommand','join','Priority','120eTPWST','486694kJbmzy','@discordjs/builders','hours','options','You\x20cannot\x20clear\x20the\x20priority\x20right\x20now.\x20Please\x20wait\x20``','channelName','Clear\x20the\x20priority\x20of\x20a\x20ticket'];_0x30fb=function(){return _0xbe4058;};return _0x30fb();}const _0x275f0c=_0xb839;(function(_0x3276d2,_0x2e46dd){const _0x568d21=_0xb839,_0x58c1bb=_0x3276d2();while(!![]){try{const _0x4501b5=parseInt(_0x568d21(0x1ec))/0x1+-parseInt(_0x568d21(0x1da))/0x2*(-parseInt(_0x568d21(0x1b6))/0x3)+-parseInt(_0x568d21(0x1ea))/0x4*(-parseInt(_0x568d21(0x1c9))/0x5)+-parseInt(_0x568d21(0x1ba))/0x6*(-parseInt(_0x568d21(0x1c1))/0x7)+-parseInt(_0x568d21(0x1f8))/0x8*(parseInt(_0x568d21(0x1d7))/0x9)+parseInt(_0x568d21(0x1cc))/0xa*(-parseInt(_0x568d21(0x1d1))/0xb)+-parseInt(_0x568d21(0x1e2))/0xc*(parseInt(_0x568d21(0x1e3))/0xd);if(_0x4501b5===_0x2e46dd)break;else _0x58c1bb['push'](_0x58c1bb['shift']());}catch(_0x477e2d){_0x58c1bb['push'](_0x58c1bb['shift']());}}}(_0x30fb,0x87ec4));const {SlashCommandBuilder}=require(_0x275f0c(0x1e4)),Discord=require('discord.js'),fs=require('fs'),yaml=require('js-yaml'),config=yaml['load'](fs[_0x275f0c(0x1d5)](_0x275f0c(0x1c4),_0x275f0c(0x1b1))),commands=yaml[_0x275f0c(0x1c8)](fs['readFileSync']('./commands.yml',_0x275f0c(0x1b1))),ticketModel=require('../../models/ticketModel'),utils=require('../../utils.js');function _0xb839(_0x12de03,_0x28ed9d){const _0x30fb64=_0x30fb();return _0xb839=function(_0xb83946,_0x517c88){_0xb83946=_0xb83946-0x1af;let _0x3245b1=_0x30fb64[_0xb83946];return _0x3245b1;},_0xb839(_0x12de03,_0x28ed9d);}function formatCooldown(_0x17f0e0){const _0x39a98e=_0x275f0c,_0x4930d1=Math[_0x39a98e(0x1b3)](_0x17f0e0/0x3e8),_0xc4fa9b=Math[_0x39a98e(0x1b3)](_0x4930d1/0x3c),_0x45fc16=Math['floor'](_0xc4fa9b/0x3c),_0x48ccad=_0x4930d1%0x3c,_0x5f7844=_0xc4fa9b%0x3c,_0x3ae749=[];if(_0x45fc16>0x0){if('ISPFT'!=='WNvGn')_0x3ae749[_0x39a98e(0x1ef)](_0x45fc16+'\x20'+(_0x45fc16===0x1?'hour':'hours'));else{const _0xca2ab6=_0x397135(_0x36c79c),_0x5e331b=new _0xf77cba[(_0x39a98e(0x1c6))]()[_0x39a98e(0x1f5)](_0x39a98e(0x1ca))['setColor']('Yellow')[_0x39a98e(0x1bb)](_0x39a98e(0x1e7)+_0xca2ab6+'``.')['setTimestamp']()['setFooter']({'text':''+_0x22dd1b[_0x39a98e(0x1cb)]['username'],'iconURL':''+_0x53269f['user']['displayAvatarURL']({'dynamic':!![]})});return _0x2d89bc['editReply']({'embeds':[_0x5e331b],'ephemeral':!![]});}}return _0x5f7844>0x0&&_0x3ae749[_0x39a98e(0x1ef)](_0x5f7844+'\x20'+(_0x5f7844===0x1?_0x39a98e(0x1b5):_0x39a98e(0x1ee))),_0x48ccad>0x0&&('Wbklm'!==_0x39a98e(0x1bd)?_0x3c462f[_0x39a98e(0x1ef)](_0x5cdf6a+'\x20'+(_0x332bf1===0x1?'hour':_0x39a98e(0x1e5))):_0x3ae749['push'](_0x48ccad+'\x20'+(_0x48ccad===0x1?'second':_0x39a98e(0x1eb)))),_0x3ae749['join'](',\x20');}module['exports']={'enabled':commands['Ticket'][_0x275f0c(0x1e1)]['Enabled'],'data':new SlashCommandBuilder()['setName'](_0x275f0c(0x1b7))[_0x275f0c(0x1bb)](commands['Ticket']['Priority']['Description'])[_0x275f0c(0x1b8)](_0x5ee253=>_0x5ee253[_0x275f0c(0x1cf)]('set')['setDescription'](_0x275f0c(0x1de))['addStringOption'](_0x951500=>{const _0x529f7c=_0x275f0c;_0x951500['setName']('level')['setDescription'](_0x529f7c(0x1ed))['setRequired'](!![]);for(let _0x21e981 of config['PrioritySettings']['Levels']){_0x951500[_0x529f7c(0x1d0)]({'name':_0x21e981[_0x529f7c(0x1b7)],'value':_0x21e981['priority']['toLowerCase']()});}return _0x951500;}))['addSubcommand'](_0x30eccb=>_0x30eccb['setName'](_0x275f0c(0x1f1))[_0x275f0c(0x1bb)](_0x275f0c(0x1e9))),async 'execute'(_0x856cd7,_0x15bd01){const _0x12a839=_0x275f0c;await _0x856cd7['deferReply']({'ephemeral':!![]});let _0x561ca4=await utils[_0x12a839(0x1bc)](_0x856cd7);if(!_0x561ca4)return _0x856cd7['editReply']({'content':config[_0x12a839(0x1f2)]['NoPermsMessage'],'ephemeral':!![]});const _0x50b95e=await ticketModel[_0x12a839(0x1f6)]({'channelID':_0x856cd7['channel']['id']});if(!_0x50b95e)return _0x856cd7['editReply']({'content':config[_0x12a839(0x1f2)]['NotInTicketChannel'],'ephemeral':!![]});if(_0x856cd7['options'][_0x12a839(0x1df)]()==='set'){const _0x46e70f=_0x856cd7[_0x12a839(0x1e6)][_0x12a839(0x1d4)]('level');if(_0x50b95e['priority'])return _0x856cd7[_0x12a839(0x1d8)]({'content':'This\x20ticket\x20already\x20has\x20a\x20priority\x20set.','ephemeral':!![]});const _0xdd600a=_0x50b95e['priorityCooldown']-Date['now']();if(_0xdd600a>0x0){const _0x17da04=formatCooldown(_0xdd600a),_0x4e4f75=new Discord['EmbedBuilder']()['setTitle']('Cooldown')['setColor'](_0x12a839(0x1d3))[_0x12a839(0x1bb)]('You\x20cannot\x20set\x20the\x20priority\x20right\x20now.\x20Please\x20wait\x20``'+_0x17da04+'``.')[_0x12a839(0x1d9)]()['setFooter']({'text':''+_0x856cd7['user'][_0x12a839(0x1d2)],'iconURL':''+_0x856cd7[_0x12a839(0x1cb)][_0x12a839(0x1d6)]({'dynamic':!![]})});return _0x856cd7['editReply']({'embeds':[_0x4e4f75],'ephemeral':!![]});}const _0x494608=config['PrioritySettings']['Levels']['find'](_0x4486f9=>_0x4486f9['priority']['toLowerCase']()===_0x46e70f),_0x11957a=0xa*0x3c*0x3e8,_0x2a72ac=Date[_0x12a839(0x1cd)]()+_0x11957a;await ticketModel[_0x12a839(0x1b9)]({'channelID':_0x856cd7[_0x12a839(0x1c5)]['id']},{'priorityCooldown':_0x2a72ac,'priority':_0x494608['priority'],'priorityName':_0x856cd7['channel'][_0x12a839(0x1bf)]});const _0x2c0d3b=_0x494608['channelName']?''+_0x494608[_0x12a839(0x1e8)]+_0x856cd7['channel'][_0x12a839(0x1bf)]:''+_0x856cd7['channel']['name'];if(_0x494608['channelName'])await _0x856cd7['channel']['setName'](_0x2c0d3b);if(_0x494608['moveToTop'])await _0x856cd7['channel'][_0x12a839(0x1dc)](0x1);let _0x571075=_0x494608['rolesToMention'][_0x12a839(0x1c7)](_0x41e42a=>{const _0x3ed5ff=_0x12a839;if(_0x3ed5ff(0x1dd)!==_0x3ed5ff(0x1dd))_0xa46847['push'](_0x23b626+'\x20'+(_0x4650e6===0x1?_0x3ed5ff(0x1ce):'seconds'));else{let _0x326308=_0x856cd7['guild'][_0x3ed5ff(0x1b0)][_0x3ed5ff(0x1db)]['get'](_0x41e42a);if(_0x326308)return _0x326308;}});const _0x465b8f=new Discord['EmbedBuilder']()['setColor']('Green')['setDescription']('Priority\x20set\x20to\x20``'+_0x494608[_0x12a839(0x1b7)]+'``\x20for\x20this\x20ticket.')['setTimestamp']()[_0x12a839(0x1af)]({'text':''+_0x856cd7[_0x12a839(0x1cb)]['username'],'iconURL':''+_0x856cd7[_0x12a839(0x1cb)][_0x12a839(0x1d6)]({'dynamic':!![]})});_0x856cd7[_0x12a839(0x1c5)][_0x12a839(0x1b2)]({'embeds':[_0x465b8f],'content':''+_0x571075[_0x12a839(0x1e0)]('\x20')}),_0x856cd7[_0x12a839(0x1d8)]({'content':'You\x20successfully\x20set\x20the\x20priority\x20for\x20this\x20ticket!'});}else{if(_0x856cd7['options']['getSubcommand']()==='clear'){if(_0x12a839(0x1c2)==='SBZIW'){let _0x40266a=_0x3f14f3[_0x12a839(0x1c0)]['roles']['cache']['get'](_0x4688a7);if(_0x40266a)return _0x40266a;}else{if(!_0x50b95e[_0x12a839(0x1b7)])return _0x856cd7[_0x12a839(0x1d8)]({'content':'This\x20ticket\x20has\x20no\x20priority!','ephemeral':!![]});const _0x3abbb7=_0x50b95e['priorityCooldown']-Date[_0x12a839(0x1cd)]();if(_0x3abbb7>0x0){const _0x3d2b2f=formatCooldown(_0x3abbb7),_0x4f73ba=new Discord[(_0x12a839(0x1c6))]()['setTitle']('Cooldown')[_0x12a839(0x1be)]('Yellow')['setDescription']('You\x20cannot\x20clear\x20the\x20priority\x20right\x20now.\x20Please\x20wait\x20``'+_0x3d2b2f+_0x12a839(0x1f4))['setTimestamp']()[_0x12a839(0x1af)]({'text':''+_0x856cd7['user']['username'],'iconURL':''+_0x856cd7[_0x12a839(0x1cb)]['displayAvatarURL']({'dynamic':!![]})});return _0x856cd7['editReply']({'embeds':[_0x4f73ba],'ephemeral':!![]});}const _0x2e0174=config[_0x12a839(0x1f0)]['Levels'][_0x12a839(0x1f3)](_0x592ba2=>_0x592ba2['priority'][_0x12a839(0x1b4)]()===_0x50b95e[_0x12a839(0x1b7)][_0x12a839(0x1b4)]());if(_0x2e0174[_0x12a839(0x1e8)])await _0x856cd7['channel'][_0x12a839(0x1cf)](_0x50b95e['priorityName']);const _0x2254b3=_0x856cd7[_0x12a839(0x1c0)]['channels']['cache'][_0x12a839(0x1c3)](_0x5b7ef1=>_0x5b7ef1[_0x12a839(0x1f7)]===0x0&&_0x5b7ef1['parentId']===_0x856cd7['channel']['parentId'])['size'],_0x390615=_0x2254b3+0x1;if(_0x2e0174['moveToTop'])await _0x856cd7['channel']['setPosition'](_0x390615);await ticketModel['findOneAndUpdate']({'channelID':_0x856cd7['channel']['id']},{'$unset':{'priority':0x1,'priorityCooldown':0x1,'priorityName':0x1}});const _0x7c6bdf=new Discord[(_0x12a839(0x1c6))]()[_0x12a839(0x1be)]('Red')['setDescription']('Priority\x20cleared\x20from\x20this\x20ticket.')['setTimestamp']();_0x856cd7['editReply']({'embeds':[_0x7c6bdf],'ephemeral':!![]});}}}}};