const _0x3c0d07=_0x50cc;(function(_0x3d8368,_0x31d6fe){const _0x4cc230=_0x50cc,_0xdc73e2=_0x3d8368();while(!![]){try{const _0x1f97a6=-parseInt(_0x4cc230(0x13f))/0x1+-parseInt(_0x4cc230(0x142))/0x2*(parseInt(_0x4cc230(0x13e))/0x3)+parseInt(_0x4cc230(0x160))/0x4*(parseInt(_0x4cc230(0x130))/0x5)+-parseInt(_0x4cc230(0x133))/0x6*(-parseInt(_0x4cc230(0x13d))/0x7)+parseInt(_0x4cc230(0x140))/0x8+parseInt(_0x4cc230(0x149))/0x9+parseInt(_0x4cc230(0x136))/0xa;if(_0x1f97a6===_0x31d6fe)break;else _0xdc73e2['push'](_0xdc73e2['shift']());}catch(_0x3587e9){_0xdc73e2['push'](_0xdc73e2['shift']());}}}(_0x543c,0x53abc));const {Discord,ActionRowBuilder,ButtonBuilder,EmbedBuilder,StringSelectMenuBuilder,Message,MessageAttachment,ModalBuilder,TextInputBuilder}=require(_0x3c0d07(0x13c)),fs=require('fs'),yaml=require(_0x3c0d07(0x158)),config=yaml[_0x3c0d07(0x14e)](fs[_0x3c0d07(0x162)](_0x3c0d07(0x163),'utf8')),utils=require('../utils.js'),guildModel=require('../models/guildModel'),ticketModel=require('../models/ticketModel'),reviewsModel=require('../models/reviewsModel'),dashboardModel=require('../models/dashboardModel');module[_0x3c0d07(0x131)]=async(_0x28db3a,_0x24764d,_0x41fbe1,_0x13b7ec,_0x978239)=>{const _0x1d6e77=_0x3c0d07;let _0x428cf9=_0x28db3a['guilds']['cache']['get'](config['GuildID']),_0x46bf95=await _0x28db3a['users']['cache']['get'](_0x24764d[_0x1d6e77(0x153)]),_0x5921fe=await _0x28db3a[_0x1d6e77(0x138)]['cache']['get'](_0x24764d['claimUser']),_0x150db9=_0x24764d[_0x1d6e77(0x156)]||'No\x20reason\x20provided.';const _0x1db331=await dashboardModel['findOne']({'guildID':config[_0x1d6e77(0x14c)]});if(_0x46bf95){let _0x1c9992=config[_0x1d6e77(0x164)]['CloseEmbedMsg'][_0x1d6e77(0x161)](/{guildName}/g,''+_0x428cf9[_0x1d6e77(0x15c)])[_0x1d6e77(0x161)](/{closedAt}/g,'<t:'+(Date['now']()/0x3e8|0x0)+':R>')[_0x1d6e77(0x161)](/{close-reason}/g,''+_0x150db9),_0x16b688=config[_0x1d6e77(0x12e)]['CloseEmbedReviewMsg'][_0x1d6e77(0x161)](/{guildName}/g,''+_0x428cf9['name'])[_0x1d6e77(0x161)](/{closedAt}/g,'<t:'+(Date['now']()/0x3e8|0x0)+':R>')['replace'](/{close-reason}/g,''+_0x150db9);if(config[_0x1d6e77(0x164)]['Enabled']!==![]||config['TicketReviewSettings']['Enabled']!==![])try{if('Lovkm'==='Lovkm'){const _0x5c7c72=new ActionRowBuilder()['addComponents'](new StringSelectMenuBuilder()[_0x1d6e77(0x12c)]('ratingSelect')['setPlaceholder'](config[_0x1d6e77(0x137)]['selectReview'])['setMinValues'](0x1)[_0x1d6e77(0x14d)](0x1)['addOptions']([{'label':_0x1d6e77(0x15d),'value':_0x1d6e77(0x157),'emoji':'⭐'},{'label':'4\x20Star','value':_0x1d6e77(0x147),'emoji':'⭐'},{'label':_0x1d6e77(0x148),'value':'three_star','emoji':'⭐'},{'label':'2\x20Star','value':'two_star','emoji':'⭐'},{'label':_0x1d6e77(0x150),'value':_0x1d6e77(0x15a),'emoji':'⭐'}]));if(!_0x5921fe)_0x5921fe=config['Locale'][_0x1d6e77(0x152)];let _0x3f7087=!![];if(config[_0x1d6e77(0x159)]['Enabled']){if('KVSzq'===_0x1d6e77(0x12d)){if(_0x24764d['messages']<config['TicketReviewRequirements']['TotalMessages'])_0x3f7087=![];}else{if(_0x367de2)_0x210408[_0x1d6e77(0x15f)](_0xdc8de3);}}const _0x121b24=new EmbedBuilder();_0x121b24[_0x1d6e77(0x15e)](config['Locale']['ticketClosedCloseDM']),_0x121b24[_0x1d6e77(0x13b)](_0x1c9992);if(config[_0x1d6e77(0x164)]['Enabled']&&config[_0x1d6e77(0x164)][_0x1d6e77(0x14b)])_0x121b24['addFields']([{'name':''+config[_0x1d6e77(0x137)]['ticketInformationCloseDM'],'value':'>\x20'+config['Locale'][_0x1d6e77(0x135)]+'\x20'+_0x24764d[_0x1d6e77(0x132)]+'\x0a>\x20'+config['Locale']['claimedByCloseDM']+'\x20'+_0x5921fe+_0x1d6e77(0x139)+config['Locale'][_0x1d6e77(0x145)]+'\x20'+_0x24764d[_0x1d6e77(0x154)]}]);_0x121b24['setColor'](config['EmbedColors']);const _0x1a23f=new EmbedBuilder();_0x1a23f[_0x1d6e77(0x15e)](config['Locale']['ticketClosedCloseDM']);if(_0x3f7087)_0x1a23f['setDescription'](_0x16b688);if(!_0x3f7087)_0x1a23f[_0x1d6e77(0x13b)](_0x1c9992);if(config['TicketUserCloseDM']['Enabled']&&config[_0x1d6e77(0x164)]['TicketInformation'])_0x1a23f['addFields']([{'name':''+config['Locale'][_0x1d6e77(0x14a)],'value':'>\x20'+config[_0x1d6e77(0x137)]['categoryCloseDM']+'\x20'+_0x24764d['ticketType']+'\x0a>\x20'+config[_0x1d6e77(0x137)]['claimedByCloseDM']+'\x20'+_0x5921fe+_0x1d6e77(0x139)+config['Locale']['totalMessagesLog']+'\x20'+_0x24764d[_0x1d6e77(0x154)]}]);_0x1a23f[_0x1d6e77(0x155)](config[_0x1d6e77(0x13a)]);const _0x412413=await utils['checkDashboard']();if(config['TicketUserCloseDM']['SendTranscript']&&_0x412413){const _0x4c7a79='>\x20['+config['Locale']['dmTranscriptClickhere']+']('+_0x1db331['url']+'/transcript?channelId='+_0x24764d['channelID']+'&dateNow='+_0x978239+')';_0x121b24['addFields']([{'name':''+config['Locale'][_0x1d6e77(0x14f)],'value':_0x4c7a79}]),_0x1a23f['addFields']([{'name':''+config['Locale']['dmTranscriptField'],'value':_0x4c7a79}]);}const _0x4f9002={'embeds':[_0x121b24]},_0x14e67d={'embeds':[_0x1a23f]};!_0x412413&&config['TicketUserCloseDM'][_0x1d6e77(0x146)]&&(_0x4f9002[_0x1d6e77(0x15b)]=[_0x41fbe1],_0x14e67d['files']=[_0x41fbe1]);if(config[_0x1d6e77(0x12e)][_0x1d6e77(0x134)]&&_0x3f7087){if('waZGy'!=='vzhFS')_0x14e67d['components']=[_0x5c7c72];else{if(_0x2084af[_0x1d6e77(0x154)]<_0x39f6bb['TicketReviewRequirements'][_0x1d6e77(0x141)])_0x34ff8d=![];}}let _0x2d785c;if(config[_0x1d6e77(0x12e)][_0x1d6e77(0x134)])await _0x46bf95['send'](_0x14e67d)['then'](async function(_0x153c99){_0x2d785c=_0x153c99['id'];});else config['TicketUserCloseDM']['Enabled']&&await _0x46bf95['send'](_0x4f9002);if(config[_0x1d6e77(0x12e)]['Enabled']){const _0x3d95c0=new reviewsModel({'ticketCreatorID':_0x46bf95['id'],'guildID':config['GuildID'],'ticketChannelID':_0x24764d[_0x1d6e77(0x143)],'userID':_0x46bf95['id'],'tCloseLogMsgID':_0x13b7ec,'reviewDMUserMsgID':_0x2d785c,'category':_0x24764d['ticketType'],'totalMessages':_0x24764d['messages'],'transcriptID':_0x978239});await _0x3d95c0['save']();}}else _0x3a82a9[_0x1d6e77(0x15b)]=[_0x2cb657],_0x1fc82b['files']=[_0x4a650e];}catch(_0x2add4e){console[_0x1d6e77(0x15f)]('\x1b[33m%s\x1b[0m','[INFO]\x20I\x20tried\x20to\x20DM\x20a\x20user,\x20but\x20their\x20DM\x27s\x20are\x20locked.');let _0x3ad9be=_0x1d6e77(0x144)+new Date()['toLocaleString']()+_0x1d6e77(0x12f)+_0x2add4e[_0x1d6e77(0x151)];await fs['appendFile']('./logs.txt',_0x3ad9be,_0x426c09=>{if(_0x426c09)console['log'](_0x426c09);});}}};function _0x50cc(_0x159b3b,_0x2b524b){const _0x543c5=_0x543c();return _0x50cc=function(_0x50cc02,_0x190a9d){_0x50cc02=_0x50cc02-0x12c;let _0x5284fb=_0x543c5[_0x50cc02];return _0x5284fb;},_0x50cc(_0x159b3b,_0x2b524b);}function _0x543c(){const _0x316f4e=['1451506LWdkhw','183gFZUGX','519437LFEQJC','837312zBOOBP','TotalMessages','20984sWSwnq','channelID','\x0a\x0a[','totalMessagesLog','SendTranscript','four_star','3\x20Star','2562705wrlYlS','ticketInformationCloseDM','TicketInformation','GuildID','setMaxValues','load','dmTranscriptField','1\x20Star','stack','notClaimedCloseDM','userID','messages','setColor','closeReason','five_star','js-yaml','TicketReviewRequirements','one_star','files','name','5\x20Star','setTitle','log','4XNTgXJ','replace','readFileSync','./config.yml','TicketUserCloseDM','setCustomId','KVSzq','TicketReviewSettings',']\x20[ERROR]\x20','3127430jILRgb','exports','ticketType','12jqGQHY','Enabled','categoryCloseDM','725540QvaXer','Locale','users','\x0a>\x20','EmbedColors','setDescription','discord.js'];_0x543c=function(){return _0x316f4e;};return _0x543c();}